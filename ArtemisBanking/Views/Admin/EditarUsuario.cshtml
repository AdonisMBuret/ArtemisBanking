@model ArtemisBanking.Web.ViewModels.Usuario.EditarUsuarioViewModel

@{
    ViewData["Title"] = "Editar Usuario";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- ==================== EDITAR USUARIO ==================== -->
<!-- Encabezado -->
<div class="row mb-4">
    <div class="col-12">
        <h2 class="text-primary-artemis mb-1">
            <i class="fas fa-user-edit me-2"></i>
            Editar Usuario
        </h2>
        <p class="text-muted mb-0">
            <i class="fas fa-info-circle me-2"></i>
            Modificar información del usuario: <strong>@Model.NombreUsuario</strong>
        </p>
        <hr style="border-color: var(--color-gray);">
    </div>
</div>

<!-- Formulario -->
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card-artemis">
            <div class="card-artemis-header">
                <i class="fas fa-clipboard-list me-2"></i>
                Datos del Usuario
                <span class="badge" style="background-color: var(--color-accent); color: white; float: right;">
                    @Model.TipoUsuario
                </span>
            </div>
            <div class="card-artemis-body p-4">
                <form asp-action="EditarUsuario" method="post">
                    <!-- Campo oculto para el ID -->
                    <input asp-for="Id" type="hidden" />
                    <input asp-for="TipoUsuario" type="hidden" />

                    <!-- Validación general -->
                    <div asp-validation-summary="ModelOnly" class="alert alert-danger-artemis mb-4"></div>

                    <!-- ==================== INFORMACIÓN PERSONAL ==================== -->
                    <h5 class="text-secondary-artemis mb-3">
                        <i class="fas fa-id-card me-2"></i>
                        Información Personal
                    </h5>

                    <div class="row">
                        <!-- Nombre -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="Nombre" class="form-label-artemis"></label>
                            <input asp-for="Nombre" class="form-control form-control-artemis" />
                            <span asp-validation-for="Nombre" class="text-danger"></span>
                        </div>

                        <!-- Apellido -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="Apellido" class="form-label-artemis"></label>
                            <input asp-for="Apellido" class="form-control form-control-artemis" />
                            <span asp-validation-for="Apellido" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Cédula -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="Cedula" class="form-label-artemis"></label>
                            <input asp-for="Cedula" class="form-control form-control-artemis" />
                            <span asp-validation-for="Cedula" class="text-danger"></span>
                        </div>

                        <!-- Correo -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="Correo" class="form-label-artemis"></label>
                            <input asp-for="Correo" type="email" class="form-control form-control-artemis" />
                            <span asp-validation-for="Correo" class="text-danger"></span>
                        </div>
                    </div>

                    <hr class="my-4" style="border-color: var(--color-gray);">

                    <!-- ==================== CREDENCIALES ==================== -->
                    <h5 class="text-secondary-artemis mb-3">
                        <i class="fas fa-key me-2"></i>
                        Credenciales de Acceso
                    </h5>

                    <!-- Nombre de Usuario -->
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <label asp-for="NombreUsuario" class="form-label-artemis"></label>
                            <input asp-for="NombreUsuario" class="form-control form-control-artemis" />
                            <span asp-validation-for="NombreUsuario" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Cambio de contraseña (opcional) -->
                    <div class="alert alert-warning-artemis mb-3">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Cambio de contraseña:</strong>
                        Solo complete estos campos si desea cambiar la contraseña del usuario.
                    </div>

                    <div class="row">
                        <!-- Nueva Contraseña -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="NuevaContrasena" class="form-label-artemis"></label>
                            <input asp-for="NuevaContrasena" type="password" class="form-control form-control-artemis" />
                            <span asp-validation-for="NuevaContrasena" class="text-danger"></span>
                        </div>

                        <!-- Confirmar Nueva Contraseña -->
                        <div class="col-md-6 mb-3">
                            <label asp-for="ConfirmarNuevaContrasena" class="form-label-artemis"></label>
                            <input asp-for="ConfirmarNuevaContrasena" type="password" class="form-control form-control-artemis" />
                            <span asp-validation-for="ConfirmarNuevaContrasena" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- ==================== MONTO ADICIONAL (SOLO CLIENTES) ==================== -->
                    @if (Model.TipoUsuario == "Cliente")
                    {
                        <hr class="my-4" style="border-color: var(--color-gray);">

                        <h5 class="text-secondary-artemis mb-3">
                            <i class="fas fa-wallet me-2"></i>
                            Agregar Fondos a Cuenta Principal
                        </h5>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="MontoAdicional" class="form-label-artemis"></label>
                                <div class="input-group">
                                    <span class="input-group-text" style="background-color: var(--color-light); border-color: var(--color-gray);">
                                        RD$
                                    </span>
                                    <input asp-for="MontoAdicional"
                                           type="number"
                                           step="0.01"
                                           class="form-control form-control-artemis"
                                           placeholder="0.00" />
                                </div>
                                <span asp-validation-for="MontoAdicional" class="text-danger"></span>
                                <small class="text-muted d-block mt-1">
                                    <i class="fas fa-plus-circle me-1"></i>
                                    Este monto se sumará al balance actual de la cuenta principal
                                </small>
                            </div>
                        </div>
                    }

                    <!-- ==================== BOTONES ==================== -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="d-flex gap-2 justify-content-end">
                                <!-- Botón Cancelar -->
                                <a asp-action="Usuarios" class="btn btn-outline-artemis">
                                    <i class="fas fa-times me-2"></i>
                                    Cancelar
                                </a>

                                <!-- Botón Guardar -->
                                <button type="submit" class="btn btn-primary-artemis">
                                    <i class="fas fa-save me-2"></i>
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Información adicional -->
        <div class="alert alert-success-artemis mt-3">
            <i class="fas fa-check-circle me-2"></i>
            Los cambios se aplicarán inmediatamente después de guardar.
        </div>
    </div>
</div>

<!-- ==================== SCRIPTS ==================== -->
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}